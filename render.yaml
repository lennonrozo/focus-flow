services:
  - type: web
    name: focusflow-backend
    runtime: python
    pythonVersion: 3.11
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn -w 4 -b 0.0.0.0:$PORT -k uvicorn.workers.UvicornWorker main:app
    envVars:
      - key: GEMINI_API_KEY
        scope: run
        isFile: false
      - key: GEMINI_MODEL
        scope: run
        value: gemini-2.0-flash-lite
    healthCheckPath: /health
    healthCheckStartupFailureThresholdCount: 10
    region: oregon
    plan: free
